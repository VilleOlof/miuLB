var g=Object.defineProperty;var S=(t,e,r)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var l=(t,e,r)=>(S(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const A="http://192.168.88.177:5420",_="/miu/lb/classic/?level={0}&limit={1}&skip={2}&orderBy={3}&orderByDesc={4}&platform={5}&usernameQuery={6}",M="/steam/lb/?start={0}&end={1}&level={2}",I="/miu/data/?jsonData={0}",w="/steam/leveldata/?allLevels={0}",o={BACKEND_IP:A,BACKEND_CLASSIC_TEMPLATE:_,BACKEND_CUSTOM_TEMPLATE:M,BACKEND_JSONDATA_TEMPLATE:I,BACKEND_CUSTOMLEVELS_TEMPLATE:w},N=new RegExp("[1-9]");function m(t,...e){for(let r=0;r<e.length;r++)t=t.toString().replace(`{${r}}`,e[r]);return t}function L(t){var e=t<0;e&&(t=-t);var r=new Date(t*1e3).toISOString().substring(12,19),a=(t-Math.floor(t)).toFixed(3);let n=0;for(let s of r.split("")){if(N.test(s))break;n++}return r=r.substring(n),`${e?"-":""}${r}${a.substring(1)}`}class D{constructor(){l(this,"platform",f.Global);l(this,"level","");l(this,"amount",0);l(this,"skip",0);l(this,"orderBy","time");l(this,"orderByDesc",!1);l(this,"username","");l(this,"usernameQuery",!1);this.GetElementValues()}GetElementValues(){this.platform=document.getElementById("platform").value,this.level=document.getElementById("classicLevel").value,this.amount=parseInt(document.getElementById("classicAmount").value),this.skip=parseInt(document.getElementById("classicSkip").value),this.orderBy=document.getElementById("orderBy").value,this.orderByDesc=document.getElementById("orderByDescending").checked,this.username=document.getElementById("usernameQuery").value,this.username!=""&&(this.usernameQuery=!0,this.level=this.username),this.orderBy=="updatedAt"&&(this.level="")}}class R{constructor(){l(this,"start",0);l(this,"end",0);l(this,"level","");this.GetElementValues()}GetElementValues(){this.start=parseInt(document.getElementById("customAmount").value),this.end=parseInt(document.getElementById("customSkip").value),this.level=document.getElementById("customlevel").value;var e=this.end+1,r=this.start+this.end;this.start=e,this.end=r}}class E{static async MakeClassicRequest(e){var r=o.BACKEND_IP+m(o.BACKEND_CLASSIC_TEMPLATE,e.level,e.amount.toString(),e.skip.toString(),e.orderBy,e.orderByDesc.toString(),e.platform,e.usernameQuery.toString()),a=await fetch(r);if(a.status==200){var n=new Array,s=await a.json();return n=JSON.parse(s.scores),n}return[]}static async MakeCustomRequest(e){var r=o.BACKEND_IP+m(o.BACKEND_CUSTOM_TEMPLATE,e.start.toString(),e.end.toString(),e.level),a=await fetch(r);if(a.status==200){var n=new Array,s=await a.json();return n=JSON.parse(s.scores),n}return[]}}const k=["Chapter 1","Chapter 2","Chapter 3","Chapter 4","Chapter 5","Chapter 6"];async function P(){var t=o.BACKEND_IP+m(o.BACKEND_JSONDATA_TEMPLATE,"classicLevelOrder"),e=o.BACKEND_IP+m(o.BACKEND_JSONDATA_TEMPLATE,"classicLevels"),r=await fetch(t);if(r.status==200){var a={},n=new Array,s=await r.json();k.forEach(u=>{var d=s[u];d.forEach(v=>{n.push(v)})});var i=await fetch(e),c=await i.json();return n.forEach(u=>{a[c[u]]=u}),a}return{}}async function H(){var t=o.BACKEND_IP+m(o.BACKEND_CUSTOMLEVELS_TEMPLATE,"true"),e=await fetch(t);if(e.status==200){var r=new Array,a=await e.json();return r=JSON.parse(a.levels),r}return[]}async function p(t){console.log(`Pinging ${t}...`);var e=await fetch(t,{method:"HEAD"}).catch(function(){return!1});return e.status==404?(console.log("Server Is Online, Everything Is Fine :clueless:"),!0):(console.log("Server Is Offline, Retrying..."),!1)}var y=void 0,C=void 0;async function h(){T(f.Global),J(),await O()}async function O(){var t=await P(),e=document.getElementById("classicLevel");for(var r in t){var a=document.createElement("option");a.value=t[r],a.text=r,e.add(a)}var n=await H(),s=document.getElementById("customLevelList");n.forEach(i=>{var c=document.createElement("option");c.value=i,s.appendChild(c)})}var f=(t=>(t.Global="Global",t.Steam="Steam",t.Switch="Switch",t.Custom="Custom",t))(f||{});function K(t,e){return t==null||e==null?!1:t.platform==e.platform&&t.level==e.level&&t.amount==e.amount&&t.skip==e.skip&&t.orderBy==e.orderBy&&t.orderByDesc==e.orderByDesc}function b(t,e){return t==null||e==null?!1:t.start==e.start&&t.end==e.end&&t.level==e.level}function G(t){return t=="Custom"?1:0}function T(t){var e=G(t),r=document.getElementById("classicOptions"),a=document.getElementById("customOptions");e==1?(r.style.display="none",a.style.display="inherit"):(r.style.display="inherit",a.style.display="none")}async function U(t){if(t=="Custom"){var e=new R;if(b(C,e))return;C=e;var r=await E.MakeCustomRequest(e);j(r);return}var a=new D;if(!K(y,a)){y=a;var n=await E.MakeClassicRequest(a);V(n)}}function J(){var t=document.getElementById("platform");t.addEventListener("change",function(){T(this.value)});var e=document.getElementById("fetchButton");e.addEventListener("click",function(){U(t.value)})}function V(t){var e=document.getElementById("LB_Table");e.innerHTML="",e.className="LB_Table";var r=e.insertRow(-1);r.className="LB_Table_Top";var a=r.insertCell(0);a.innerHTML="Rank",a.className="LB_Table_RankTH",r.insertCell(1).innerHTML="Time",r.insertCell(2).innerHTML="Username",r.insertCell(3).innerHTML="Platform",r.insertCell(4).innerHTML="Date";var n=0;t.forEach(s=>{n++;var i=e.insertRow(-1);i.className="LB_Table_Row";var c=i.insertCell(0),u=i.insertCell(1),d=i.insertCell(2),v=i.insertCell(3),B=i.insertCell(4);c.className="LB_Table_RankTH",c.innerHTML=s.rank!=null?s.rank.toString():n.toString(),u.innerHTML=L(s.time),d.innerHTML=s.username,v.innerHTML=s.platform.toString(),B.innerHTML=s.timestamp.toString().substring(0,10)})}function j(t){var e=document.getElementById("LB_Table");e.innerHTML="",e.className="LB_Table";var r=e.insertRow(-1);r.className="LB_Table_Top",r.insertCell(0).innerHTML="Rank",r.insertCell(1).innerHTML="Time",r.insertCell(2).innerHTML="Username",t.forEach(a=>{var n=e.insertRow(-1);n.className="LB_Table_Row";var s=n.insertCell(0),i=n.insertCell(1),c=n.insertCell(2);s.innerHTML=a.GlobalRank.toString(),i.innerHTML=L(a.time),c.innerHTML=a.user})}async function x(){var t=await p(o.BACKEND_IP);if(console.log(t),t)h();else{var e=document.getElementById("offlineMessage");e.style.display="inline-block";var r=document.getElementById("retryingErrorHeading");const s=15;var a=0,n=setInterval(async function(){a++,a%s==0&&(t=await p(o.BACKEND_IP),t&&(e.style.display="none",clearInterval(n),h()));var i=s-a%s;r.innerHTML=`Retrying in ${i} seconds...`},1e3)}}x();
